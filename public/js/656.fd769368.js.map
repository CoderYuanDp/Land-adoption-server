{"version":3,"file":"js/656.fd769368.js","mappings":"+MAGA,MAAMA,EAAeC,IACZC,EAAAA,EAAAA,GAAM,CACXC,OAAQ,OACRC,IAAK,SAELC,KAAMJ,IAKJK,EAAcL,IACXC,EAAAA,EAAAA,GAAM,CACXC,OAAQ,OACRC,IAAK,cACLG,QAAS,CAAE,eAAgB,uBAC3BF,KAAMJ,IAKJO,EAAiBA,KACdN,EAAAA,EAAAA,GAAM,CACXC,OAAQ,MACRC,IAAK,uB,gtICzBFK,MAAM,a,GACJA,MAAM,Y,gKADbC,EAAAA,EAAAA,IAyBM,MAzBNC,EAyBM,EAxBJC,EAAAA,EAAAA,GAgBM,MAhBNC,EAgBM,EAfJC,EAAAA,EAAAA,IAKWC,EAAA,CALA,YAAWC,EAAAC,SAAW,gBAAeD,EAAAE,aAAeC,SAAQH,EAAAI,c,mBACrE,IAGW,EAHXN,EAAAA,EAAAA,IAGWO,EAAA,M,kBAFT,IAAmC,EAAnCP,EAAAA,EAAAA,IAAmCQ,IAAA,4B,2DAIvCR,EAAAA,EAAAA,IAQWO,EAAA,CAPTE,KAAK,UACJC,SAA8B,IAApBR,EAAAC,SAASQ,OACnBC,QAASV,EAAAW,UACVC,MAAA,sBACCC,QAAOb,EAAAc,c,mBAER,IAA8C,mBAA3Cd,EAAAW,UAAY,YAAc,gBAAjB,M,4CAGhBb,EAAAA,EAAAA,IAMUiB,EAAA,CANAC,WAAYhB,EAAAgB,WAAaC,QAASjB,EAAAiB,S,CACzBC,UAAQC,EAAAA,EAAAA,KACvB,EAD2BC,SAAQC,YAAM,CACJ,QAArBD,EAAOE,YAAS,WAAhC5B,EAAAA,EAAAA,IAEW6B,EAAAA,GAAA,CAAAC,IAAA,KADT5B,EAAAA,EAAAA,GAA6B,aAAA6B,EAAAA,EAAAA,IAApBJ,EAAOjC,KAAG,eAAWQ,EAAAA,EAAAA,GAA8F,OAAzFH,MAAM,YAAaoB,QAAKa,GAAE1B,EAAA2B,SAASN,EAAOjC,KAAMwC,IAAAC,EAAkCC,IAAI,I,oFCrB/HC,EAAiB,CAAE,KAAQ,CAAE,IAAO,MAAO,MAAS,CAAE,QAAW,gBAAiB,UAAa,SAAW,SAAY,CAAC,CAAE,IAAO,OAAQ,MAAS,CAAE,EAAK,gTAAoT,KAAQ,SAAU,MAAS,YAC3e,I,UCAA,SAASC,EAAcC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAU1B,OAAQyB,IAAK,CAAE,IAAIE,EAAyB,MAAhBD,UAAUD,GAAaG,OAAOF,UAAUD,IAAM,CAAC,EAAOI,EAAUD,OAAOE,KAAKH,GAAqD,oBAAjCC,OAAOG,wBAAwCF,EAAUA,EAAQG,OAAOJ,OAAOG,sBAAsBJ,GAAQM,QAAO,SAAUC,GAAO,OAAON,OAAOO,yBAAyBR,EAAQO,GAAKE,UAAY,MAAOP,EAAQQ,SAAQ,SAAUtB,GAAOuB,EAAgBd,EAAQT,EAAKY,EAAOZ,GAAO,GAAI,CAAE,OAAOS,CAAQ,CAExe,SAASc,EAAgBC,EAAKxB,EAAKyB,GAAiK,OAApJzB,KAAOwB,EAAOX,OAAOa,eAAeF,EAAKxB,EAAK,CAAEyB,MAAOA,EAAOJ,YAAY,EAAMM,cAAc,EAAMC,UAAU,IAAkBJ,EAAIxB,GAAOyB,EAAgBD,CAAK,CAOhN,IAAIjB,EAAiB,SAAwBsB,EAAOC,GAClD,IAAIC,EAAIvB,EAAc,CAAC,EAAGqB,EAAOC,EAAQE,OAEzC,OAAO1D,EAAAA,EAAAA,IAAa2D,EAAAA,EAAUzB,EAAc,CAAC,EAAGuB,EAAG,CACjD,KAAQG,IACN,KACN,EAEA3B,EAAe4B,YAAc,iBAC7B5B,EAAe6B,cAAe,EAC9B,Q,oBCnBA,MAAMC,EAAYC,IAChB,GAAIC,UAAUC,UACZD,UAAUC,UAAUC,UAAUH,OACzB,CACL,MAAMI,EAAWC,SAASC,cAAc,YACxCD,SAASE,KAAKC,YAAYJ,GAC1BA,EAAStD,MAAM2D,SAAW,QAC1BL,EAAStD,MAAM4D,KAAO,gBACtBN,EAAStD,MAAM6D,IAAM,OAErBP,EAASjB,MAAQa,EACjBI,EAASQ,SACTP,SAASQ,YAAY,QAAQ,GAC7BR,SAASE,KAAKO,YAAYV,EAC5B,GHoBF,OAAeW,EAAAA,EAAAA,IAAgB,CAC7BC,WAAY,CAAE/C,eAAcA,GAC5BgD,QACE,MAAM9E,GAAW+E,EAAAA,EAAAA,IAAI,IACfrE,GAAYqE,EAAAA,EAAAA,KAAI,GAChB5E,EAAe6E,IACnB,MAAMC,EAAQjF,EAASgD,MAAMkC,QAAQF,GAC/BG,EAAcnF,EAASgD,MAAMoC,QACnCD,EAAYE,OAAOJ,EAAO,GAC1BjF,EAASgD,MAAQmC,CAAU,EAEvBlF,EAAe+E,IACnBhF,EAASgD,MAAQ,IAAIhD,EAASgD,MAAOgC,IAC9B,GAGHnE,EAAeA,KACnB,MAAMyE,EAAW,IAAIC,SACrBvF,EAASgD,MAAMH,SAAQmC,IACrBM,EAASE,OAAO,QAASR,EAAK,IAEhCtE,EAAUsC,OAAQ,GAClB3D,EAAAA,EAAAA,IAAWiG,GAAUG,MAAMC,IACrBA,EAAIC,SACN3F,EAASgD,MAAQ,GACjBtC,EAAUsC,OAAQ,EAClB4C,IACAC,EAAAA,GAAAA,QAAgB,yBAEhBA,EAAAA,GAAAA,MAAcH,EAAIG,QACpB,IACCC,OAAM,KACPpF,EAAUsC,OAAQ,EAClB6C,EAAAA,GAAAA,MAAc,iBAAiB,GAC/B,EAGE9E,GAAagE,EAAAA,EAAAA,IAAI,IAEjBa,EAAcA,MAClBrG,EAAAA,EAAAA,KAAiBkG,MAAKC,IAChBA,EAAIC,QACN5E,EAAWiC,MAAQ0C,EAAItG,KAEvByG,EAAAA,GAAAA,MAAcH,EAAIG,QACpB,IACCC,OAAOC,IACRF,EAAAA,GAAAA,MAAcE,EAAIF,QAAQ,GAC1B,EAEJD,IAEA,MAAM5E,EAAU,CACd,CACEgF,MAAO,OACP3E,UAAW,OACXE,IAAK,QAEP,CACEyE,MAAO,KACP3E,UAAW,MACXE,IAAK,QAIHG,EAAYuE,IAChB,IACErC,EAASqC,GACTJ,EAAAA,GAAAA,QAAgB,UAClB,CAAE,MAAOE,GACPG,QAAQC,IAAIJ,GACZF,EAAAA,GAAAA,MAAc,OAChB,GAGF,MAAO,CACL7F,WACAU,YACAP,eACAF,eACAY,eACAE,aACAC,UACAU,WAEJ,I,UIlHF,MAAM0E,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://back-plat/./src/api/commonApi.js","webpack://back-plat/./src/views/dataManage/fileUpload.vue","webpack://back-plat/./node_modules/@ant-design/icons-svg/es/asn/UploadOutlined.js","webpack://back-plat/./node_modules/@ant-design/icons-vue/es/icons/UploadOutlined.js","webpack://back-plat/./src/utils/tool.js","webpack://back-plat/./src/views/dataManage/fileUpload.vue?fd5b"],"sourcesContent":["import fetch from '@/service'\r\n\r\n// 登录\r\nconst loginByForm = (form) => {\r\n  return fetch({\r\n    method: 'post',\r\n    url: '/login',\r\n    // 'get' ? 'params' : 'data'\r\n    data: form\r\n  })\r\n}\r\n\r\n// 上传\r\nconst uploadFile = (form) => {\r\n  return fetch({\r\n    method: 'post',\r\n    url: '/uploadFile',\r\n    headers: { 'Content-Type': 'multipart/form-data' },\r\n    data: form\r\n  })\r\n}\r\n\r\n// 获取上传文件列表\r\nconst getUploadFiles = () => {\r\n  return fetch({\r\n    method: 'get',\r\n    url: '/getUploadFilesList'\r\n  })\r\n}\r\nexport {\r\n  loginByForm,\r\n  uploadFile,\r\n  getUploadFiles\r\n}\r\n","<template>\r\n  <div class=\"container\">\r\n    <div class=\"clearfix\">\r\n      <a-upload :file-list=\"fileList\" :before-upload=\"beforeUpload\" @remove=\"handleRemove\">\r\n        <a-button>\r\n          <upload-outlined></upload-outlined>\r\n          Select File\r\n        </a-button>\r\n      </a-upload>\r\n      <a-button\r\n        type=\"primary\"\r\n        :disabled=\"fileList.length === 0\"\r\n        :loading=\"uploading\"\r\n        style=\"margin-top: 16px;\"\r\n        @click=\"handleUpload\"\r\n      >\r\n        {{ uploading ? 'Uploading' : 'Start Upload' }}\r\n      </a-button>\r\n    </div>\r\n    <a-table :dataSource=\"dataSource\" :columns=\"columns\">\r\n      <template v-slot:bodyCell=\"{ column, record }\">\r\n        <template v-if=\"column.dataIndex === 'url'\">\r\n          <span>{{ record.url }}</span> <img class=\"icon-size\" @click=\"copyLink(record.url)\" src=\"../../assets/icons/copy.png\" alt=\"\">\r\n        </template>\r\n      </template>\r\n    </a-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent, ref } from 'vue'\r\nimport { UploadOutlined } from '@ant-design/icons-vue'\r\nimport { message } from 'ant-design-vue'\r\nimport { uploadFile, getUploadFiles } from '@/api/commonApi'\r\nimport { copyText } from '@/utils/tool'\r\n\r\nexport default defineComponent({\r\n  components: { UploadOutlined },\r\n  setup () {\r\n    const fileList = ref([])\r\n    const uploading = ref(false)\r\n    const handleRemove = file => {\r\n      const index = fileList.value.indexOf(file)\r\n      const newFileList = fileList.value.slice()\r\n      newFileList.splice(index, 1)\r\n      fileList.value = newFileList\r\n    }\r\n    const beforeUpload = file => {\r\n      fileList.value = [...fileList.value, file]\r\n      return false\r\n    }\r\n    // 上传处理函数\r\n    const handleUpload = () => {\r\n      const formData = new FormData()\r\n      fileList.value.forEach(file => {\r\n        formData.append('files', file)\r\n      })\r\n      uploading.value = true\r\n      uploadFile(formData).then((res) => {\r\n        if (res.success) {\r\n          fileList.value = []\r\n          uploading.value = false\r\n          getFileList()\r\n          message.success('upload successfully.')\r\n        } else {\r\n          message.error(res.message)\r\n        }\r\n      }).catch(() => {\r\n        uploading.value = false\r\n        message.error('upload failed.')\r\n      })\r\n    }\r\n\r\n    const dataSource = ref([])\r\n    // 获取上传文件列表\r\n    const getFileList = () => {\r\n      getUploadFiles().then(res => {\r\n        if (res.success) {\r\n          dataSource.value = res.data\r\n        } else {\r\n          message.error(res.message)\r\n        }\r\n      }).catch((err) => {\r\n        message.error(err.message)\r\n      })\r\n    }\r\n    getFileList()\r\n\r\n    const columns = [\r\n      {\r\n        title: '上传时间',\r\n        dataIndex: 'date',\r\n        key: 'date'\r\n      },\r\n      {\r\n        title: '链接',\r\n        dataIndex: 'url',\r\n        key: 'url'\r\n      }\r\n    ]\r\n\r\n    const copyLink = (link) => {\r\n      try {\r\n        copyText(link)\r\n        message.success('已复制到剪切板')\r\n      } catch (err) {\r\n        console.log(err)\r\n        message.error('复制失败')\r\n      }\r\n    }\r\n\r\n    return {\r\n      fileList,\r\n      uploading,\r\n      handleRemove,\r\n      beforeUpload,\r\n      handleUpload,\r\n      dataSource,\r\n      columns,\r\n      copyLink\r\n    }\r\n  }\r\n})\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.container {\r\n  padding-left: 40px;\r\n  .clearfix {\r\n    padding-bottom: 20px;\r\n  }\r\n  .icon-size {\r\n    width: 20px;\r\n    height: 20px;\r\n    cursor: pointer;\r\n  }\r\n}\r\n</style>\r\n","// This icon file is generated automatically.\nvar UploadOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z\" } }] }, \"name\": \"upload\", \"theme\": \"outlined\" };\nexport default UploadOutlined;\n","import { createVNode as _createVNode } from \"vue\";\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport UploadOutlinedSvg from \"@ant-design/icons-svg/es/asn/UploadOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar UploadOutlined = function UploadOutlined(props, context) {\n  var p = _objectSpread({}, props, context.attrs);\n\n  return _createVNode(AntdIcon, _objectSpread({}, p, {\n    \"icon\": UploadOutlinedSvg\n  }), null);\n};\n\nUploadOutlined.displayName = 'UploadOutlined';\nUploadOutlined.inheritAttrs = false;\nexport default UploadOutlined;","\r\n// 复制内容到剪切板\r\nconst copyText = (content) => {\r\n  if (navigator.clipboard) {\r\n    navigator.clipboard.writeText(content)\r\n  } else {\r\n    const textarea = document.createElement('textarea')\r\n    document.body.appendChild(textarea)\r\n    textarea.style.position = 'fixed'\r\n    textarea.style.clip = 'rect(0 0 0 0)'\r\n    textarea.style.top = '10px'\r\n\r\n    textarea.value = content\r\n    textarea.select()\r\n    document.execCommand('copy', true)\r\n    document.body.removeChild(textarea)\r\n  }\r\n}\r\n\r\nexport {\r\n  copyText\r\n}\r\n","import { render } from \"./fileUpload.vue?vue&type=template&id=70f44f15&scoped=true\"\nimport script from \"./fileUpload.vue?vue&type=script&lang=js\"\nexport * from \"./fileUpload.vue?vue&type=script&lang=js\"\n\nimport \"./fileUpload.vue?vue&type=style&index=0&id=70f44f15&lang=less&scoped=true\"\n\nimport exportComponent from \"F:\\\\Graduation-project\\\\back-plat\\\\node_modules\\\\.pnpm\\\\vue-loader@17.0.1_vue@3.2.47+webpack@5.76.0\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-70f44f15\"]])\n\nexport default __exports__"],"names":["loginByForm","form","fetch","method","url","data","uploadFile","headers","getUploadFiles","class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","_component_a_upload","_ctx","fileList","beforeUpload","onRemove","handleRemove","_component_a_button","_component_upload_outlined","type","disabled","length","loading","uploading","style","onClick","handleUpload","_component_a_table","dataSource","columns","bodyCell","_withCtx","column","record","dataIndex","_Fragment","key","_toDisplayString","$event","copyLink","src","_imports_0","alt","UploadOutlined","_objectSpread","target","i","arguments","source","Object","ownKeys","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","enumerable","forEach","_defineProperty","obj","value","defineProperty","configurable","writable","props","context","p","attrs","AntdIcon","UploadOutlinedSvg","displayName","inheritAttrs","copyText","content","navigator","clipboard","writeText","textarea","document","createElement","body","appendChild","position","clip","top","select","execCommand","removeChild","defineComponent","components","setup","ref","file","index","indexOf","newFileList","slice","splice","formData","FormData","append","then","res","success","getFileList","message","catch","err","title","link","console","log","__exports__","render"],"sourceRoot":""}